import sys
import socket


def usage():
    print("""Quick, simple python banner grabbing scanner\n"""
          "Usage: python socketScanner.py 127.0.0.1 22-2222\n"
          "If no arguements are supplied, defaults to 127.0.0.1 1-1024\n"
          "sys.argv[1] should be the host IP\n"
          "sys.argv[2] and sys.argv[3] should be the port range <lowest/highest>\n")


def grab(host, port_lower, port_upper):
    count = 0
    for port in range(port_lower, port_upper):
        print(port)
        try:
            s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
            s.settimeout(1000)
            s.connect((host,port))
            print("{}:OPEN".format(port))
            s.close()
        except:
            continue
        finally:
            count = count + 1
    return count


if len(sys.argv) == 2:
    print("Grabbing banners from {} on ports 22-2222".format(sys.argv[1]))
    grab(sys.argv[1], 22, 2222)

elif len(sys.argv) == 3:
    print("Grabbing banners from {} on ports {}-{}".format(sys.argv[1], sys.argv[2], sys.argv[3]))
    grab(sys.argv[1], sys.argv[2], sys.argv[3])

else:
    usage()


