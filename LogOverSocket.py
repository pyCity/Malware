from logging import *
import logging.handlers
import socket


class SocketHandler(logging.handlers.SocketHandler):

    def create_socket(self, timeout=1):
        result = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
        try:
            result.connect(self.address)
        except OSError as hell:
            result.close()
            raise hell
        return result


rootLogger = getLogger("")
rootLogger.setLevel(DEBUG)
socket_handle = SocketHandler("localhost", logging.handlers.DEDEFAULT_TCP_LOGGING_PORT)
rootLogger.addHandler(socket_handle)
